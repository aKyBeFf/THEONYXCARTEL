<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>ONYX CARTEL | Management</title>
    <style>
        body { 
            background-color: #0b0b0b; color: #e0e0e0; 
            font-family: 'Segoe UI', Tahoma, sans-serif; 
            display: flex; justify-content: center; align-items: center; 
            min-height: 100vh; margin: 0; overflow-y: auto; position: relative;
        }

        .snowflake { position: absolute; top: -10px; background: #fff; border-radius: 50%; opacity: 0.8; pointer-events: none; animation: fall linear infinite; }
        @keyframes fall { to { transform: translateY(105vh); } }

        .form-card { 
            background: rgba(20, 20, 20, 0.95); border: 1px solid #333; 
            padding: 40px; border-radius: 15px; width: 450px; 
            box-shadow: 0 10px 40px rgba(0,0,0,0.8); z-index: 10; backdrop-filter: blur(10px); margin: 20px 0;
        }

        h2 { text-align: center; color: #fff; letter-spacing: 4px; margin: 0; text-transform: uppercase; }
        .subtitle { text-align: center; font-size: 11px; color: #666; margin-bottom: 20px; letter-spacing: 2px; }
        
        .discord-auth-zone { background: #1a1c1e; border: 1px dashed #444; padding: 15px; border-radius: 10px; text-align: center; margin-bottom: 20px; }
        .user-info { display: none; align-items: center; justify-content: center; gap: 15px; }
        .user-avatar { width: 40px; height: 40px; border-radius: 50%; border: 2px solid #5865F2; }
        .user-name { font-weight: bold; color: #fff; }
        .btn-discord { background: #5865F2; color: #fff; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; font-weight: bold; transition: 0.3s; }
        .btn-discord:hover { background: #4752C4; }

        label { display: block; margin-top: 15px; font-size: 11px; color: #aaa; text-transform: uppercase; }
        input, select { width: 100%; padding: 12px; margin-top: 8px; background: #1d1d1d; border: 1px solid #333; color: #fff; border-radius: 6px; box-sizing: border-box; outline: none; }
        select:disabled { background: #141414; color: #00ff00; opacity: 1; }
        
        .link-input-group { display: flex; gap: 10px; margin-top: 8px; }
        .btn-add { background: #28a745; color: #fff; border: none; padding: 0 20px; border-radius: 6px; cursor: pointer; font-weight: bold; font-size: 18px; transition: 0.3s; }
        .btn-add:hover { background: #218838; }
        .links-list { margin-top: 10px; display: flex; flex-direction: column; gap: 5px; }
        .link-item { background: #222; padding: 8px 12px; border-radius: 5px; display: flex; justify-content: space-between; align-items: center; font-size: 12px; border: 1px solid #333; }
        .link-text { overflow: hidden; text-overflow: ellipsis; white-space: nowrap; max-width: 350px; color: #4db8ff; }
        .btn-remove { background: transparent; border: none; color: #ff4d4d; cursor: pointer; font-weight: bold; font-size: 14px; margin-left: 10px; }
        .btn-remove:hover { color: #ff0000; }

        .submit-btn { width: 100%; padding: 15px; margin-top: 25px; background: #fff; border: none; color: #000; font-weight: bold; cursor: pointer; border-radius: 6px; text-transform: uppercase; transition: 0.3s; }
        .submit-btn:disabled { background: #333; color: #666; cursor: not-allowed; }

       
        #modalOverlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); display: none; justify-content: center; align-items: center; z-index: 100; backdrop-filter: blur(8px); }
        .modal { background: #1a1a1a; border: 1px solid #444; padding: 40px; border-radius: 10px; text-align: center; width: 320px; transform: scale(0.7); transition: 0.3s; }
        .modal.active { transform: scale(1); }
        .modal-btn { background: #fff; color: #000; border: none; padding: 10px 40px; border-radius: 5px; cursor: pointer; font-weight: bold; margin-top: 20px; }

        .branding { text-align: center; font-size: 9px; margin-top: 25px; color: #444; }
    </style>
</head>
<body>

<div id="snow-container"></div>

<div class="form-card">
    <h2>‚¶â ‚óà ONYX ‚óà ‚¶ä</h2>
    <div class="subtitle">ADVANCED REPORT SYSTEM</div>

    <div class="discord-auth-zone" id="authZone">
        <div id="loginPrompt">
            <p style="font-size: 12px; margin-bottom: 10px;">–¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è</p>
            <button class="btn-discord" onclick="loginDiscord()">–í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ Discord</button>
        </div>
        <div class="user-info" id="userInfo">
            <img src="" id="userAvatar" class="user-avatar">
            <span id="userName" class="user-name"></span>
            <button onclick="logout()" style="background:none; border:none; color:#ff4d4d; cursor:pointer; font-size:10px;">[–í—ã–π—Ç–∏]</button>
        </div>
    </div>
    
    <form id="rankForm">
        <label>–ò–º—è –∏ –§–∞–º–∏–ª–∏—è (–Ω–∞ —Ä—É—Å—Å–∫–æ–º)</label>
        <input type="text" id="fullname" placeholder="–ù–∞–ø—Ä: –ê–Ω–¥—Ä–µ–π –ö–æ–Ω—á–µ–Ω–≥–∞–Ω" required disabled>

        <label>–¢–µ–∫—É—â–∏–π —Ä–∞–Ω–≥</label>
        <select id="currentRank" onchange="updateNextRank()" required disabled>
            <option value="" disabled selected>–°–Ω–∞—á–∞–ª–∞ –≤–æ–π–¥–∏—Ç–µ –≤ Discord</option>
            <option value="1">1 | –° –´ –† –¨ –ï</option>
            <option value="2">2 | –û –° –ö –û –õ –û –ö</option>
            <option value="3">3 | –Æ –í –ï –õ –ò –†</option>
            <option value="4">4 | –ì –† –ê –í –ò –† –û –í –© –ò –ö</option>
            <option value="5">5 | –ö –ê –† –ê –¢</option>
            <option value="6">6 | –û –ö –£ –õ –ò –° –¢</option>
            <option value="7">7 | –ú –ê –° –¢ –ï –†</option>
        </select>

        <label>–î–æ—Å—Ç—É–ø–Ω–æ–µ –ø–æ–≤—ã—à–µ–Ω–∏–µ</label>
        <select id="newRank" disabled>
            <option value="">–û–∂–∏–¥–∞–Ω–∏–µ...</option>
        </select>

        <label>–î–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞ (–°—Å—ã–ª–∫–∞ + –∫–Ω–æ–ø–∫–∞ –î–æ–±–∞–≤–∏—Ç—å)</label>
        <div class="link-input-group">
            <input type="url" id="linkInput" placeholder="https://imgur.com/..." disabled>
            <button type="button" class="btn-add" onclick="addLink()" id="addBtn" disabled>+</button>
        </div>
        <div id="linksContainer" class="links-list"></div>

        <button type="submit" id="submitBtn" class="submit-btn" disabled>–û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ç—á–µ—Ç</button>
    </form>
    <div class="branding">¬© THE ONYX CARTEL | Winter 2025</div>
</div>

<div id="modalOverlay">
    <div class="modal" id="successModal">
        <div class="modal-icon" style="font-size: 50px; margin-bottom: 20px;">‚ùÑ</div>
        <div class="modal-text">–û—Ç—á–µ—Ç —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω!</div>
        <button class="modal-btn" onclick="closeModal()">–•–æ—Ä–æ—à–æ!</button>
    </div>
</div>

<script>
 
    const WEBHOOK_URL = 'https://discord.com/api/webhooks/1451275072907247768/LrlLl54X2us-sLRSg1xipbqPZhBeZrYUdg7o51g9zKtB6knNqf_eVt5q7G-U7NJqMHYU'; 
    const CLIENT_ID = '1451284313109954650';
    const REDIRECT_URI = window.location.href.split('#')[0];

    let userData = null;
    let evidenceLinks = []; 


    function addLink() {
        const input = document.getElementById('linkInput');
        const url = input.value.trim();

        if (url) {
            evidenceLinks.push(url);
            renderLinks();
            input.value = ''; 
        } else {
            alert("–í–≤–µ–¥–∏—Ç–µ —Å—Å—ã–ª–∫—É –ø–µ—Ä–µ–¥ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º!");
        }
    }

    function removeLink(index) {
        evidenceLinks.splice(index, 1);
        renderLinks();
    }

    function renderLinks() {
        const container = document.getElementById('linksContainer');
        container.innerHTML = '';

        evidenceLinks.forEach((link, index) => {
            const div = document.createElement('div');
            div.className = 'link-item';
            div.innerHTML = `
                <span class="link-text">${index + 1}. ${link}</span>
                <button type="button" class="btn-remove" onclick="removeLink(${index})">‚úï</button>
            `;
            container.appendChild(div);
        });
    }

    function loginDiscord() {
        const url = `https://discord.com/api/oauth2/authorize?client_id=${CLIENT_ID}&redirect_uri=${encodeURIComponent(REDIRECT_URI)}&response_type=token&scope=identify`;
        window.location.href = url;
    }

    function handleAuth() {
        const fragment = new URLSearchParams(window.location.hash.slice(1));
        const accessToken = fragment.get('access_token');

        if (accessToken) {
            fetch('https://discord.com/api/users/@me', {
                headers: { Authorization: `Bearer ${accessToken}` }
            })
            .then(res => res.json())
            .then(data => {
                userData = data;
                showUser(data);
                enableForm();
            });
            window.history.replaceState({}, document.title, REDIRECT_URI);
        }
    }

    function showUser(user) {
        document.getElementById('loginPrompt').style.display = 'none';
        document.getElementById('userInfo').style.display = 'flex';
        document.getElementById('userName').innerText = `${user.username}#${user.discriminator || '0'}`;
        document.getElementById('userAvatar').src = `https://cdn.discordapp.com/avatars/${user.id}/${user.avatar}.png`;
    }

    function enableForm() {
        document.getElementById('fullname').disabled = false;
        document.getElementById('currentRank').disabled = false;
        document.getElementById('linkInput').disabled = false;
        document.getElementById('addBtn').disabled = false;
        document.getElementById('submitBtn').disabled = false;
    }

    function logout() { window.location.reload(); }

    const ranks = { "1":"2 | –û –° –ö –û –õ –û –ö", "2":"3 | –Æ –í –ï –õ –ò –†", "3":"4 | –ì –† –ê –í –ò –† –û –í –© –ò –ö", "4":"5 | –ö –ê –† –ê –¢", "5":"6 | –û –ö –£ –õ –ò –° –¢", "6":"7 | –ú –ê –° –¢ –ï –†", "7":"8 | –ë –ï –ó –£ –ü –† –ï –ß –ù –´ –ô" };
    const currentNames = { "1":"1 | –° –´ –† –¨ –ï", "2":"2 | –û –° –ö –û –õ –û –ö", "3":"3 | –Æ –í –ï –õ –ò –†", "4":"4 | –ì –† –ê –í –ò –† –û –í –© –ò –ö", "5":"5 | –ö –ê –† –ê –¢", "6":"6 | –û –ö –£ –õ –ò –° –¢", "7":"7 | –ú –ê –° –¢ –ï –†" };

    function updateNextRank() {
        const currentVal = document.getElementById('currentRank').value;
        const nextRankSelect = document.getElementById('newRank');
        nextRankSelect.innerHTML = "";
        if (ranks[currentVal]) {
            const option = document.createElement('option');
            option.value = ranks[currentVal]; option.text = ranks[currentVal]; option.selected = true;
            nextRankSelect.appendChild(option);
        }
    }

    document.getElementById('rankForm').addEventListener('submit', function(e) {
        e.preventDefault();

        if (evidenceLinks.length === 0) {
            alert("–í—ã –Ω–µ –¥–æ–±–∞–≤–∏–ª–∏ –Ω–∏ –æ–¥–Ω–æ–π —Å—Å—ã–ª–∫–∏ –Ω–∞ –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞! –ù–∞–∂–º–∏—Ç–µ '+' –ø–æ—Å–ª–µ –≤–≤–æ–¥–∞ —Å—Å—ã–ª–∫–∏.");
            return;
        }
        
        const linksFormatted = evidenceLinks.map((link, i) => `[–î–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ ${i+1}](${link})`).join('\n');

        const data = {
            username: "–°–∏—Å—Ç–µ–º–∞ –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ ONYX",
            embeds: [{
                title: "‚ùÑÔ∏è –ù–û–í–´–ô –í–ï–†–ò–§–ò–¶–ò–†–û–í–ê–ù–ù–´–ô –û–¢–ß–ï–¢",
                color: 0x5865F2,
                thumbnail: { url: `https://cdn.discordapp.com/avatars/${userData.id}/${userData.avatar}.png` },
                fields: [
                    { name: "üîë Discord –ê–∫–∫–∞—É–Ω—Ç", value: `<@${userData.id}> (${userData.username})`, inline: false },
                    { name: "üë§ –ò–º—è –≤ –∏–≥—Ä–µ", value: `**${document.getElementById('fullname').value}**`, inline: false },
                    { name: "üìâ –†–∞–Ω–≥", value: `${currentNames[document.getElementById('currentRank').value]} ‚Üí ${document.getElementById('newRank').value}`, inline: false },
                    { name: "üîó –î–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞", value: linksFormatted, inline: false }
                ],
                footer: { text: `ID: ${userData.id}` },
                timestamp: new Date()
            }]
        };

        fetch(WEBHOOK_URL, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(data) })
        .then(() => { 
            openModal(); 
            document.getElementById('rankForm').reset();
            evidenceLinks = []; 
            renderLinks(); 
        });
    });

    function createSnowflake() { const snow = document.createElement('div'); snow.className = 'snowflake'; snow.style.left = Math.random() * 100 + 'vw'; snow.style.width = Math.random() * 4 + 2 + 'px'; snow.style.height = snow.style.width; snow.style.animationDuration = Math.random() * 3 + 2 + 's'; document.body.appendChild(snow); setTimeout(() => snow.remove(), 5000); }
    setInterval(createSnowflake, 100);
    function openModal() { document.getElementById('modalOverlay').style.display = 'flex'; setTimeout(() => document.getElementById('successModal').classList.add('active'), 10); }
    function closeModal() { document.getElementById('successModal').classList.remove('active'); setTimeout(() => document.getElementById('modalOverlay').style.display = 'none', 300); }

    window.onload = handleAuth;
</script>
</body>
</html>
